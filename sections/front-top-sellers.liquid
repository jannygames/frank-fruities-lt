<div class="py-16 lg:py-5">
  <style>
    .jdgm-prev-badge__text {
      display: none !important;
    }
  </style>
  <div class="max-w-[1150px] m-auto flex justify-between gap-6 mb-10 px-0 md:px-4">
    <div class="flex-shrink text-center w-full md:w-auto">
      <h3 class="colored-title text-black font-bold text-3xl lg:text-4xl leading-snug uppercase">
        {{ section.settings.title }}
      </h3>
    </div>
    <div class="flex-grow justify-center flex-col hidden md:flex">
      <div class="bg-[#E1E1E1] h-[1px] w-full"></div>
    </div>
    <div class="flex-shrink hidden md:flex">
      <a
        href="{{ routes.all_products_collection_url }}"
        class="bg-[#343057] text-center rounded-lg text-[#fff] text-base lg:text-md py-2 lg:py-3 px-7"
      >
        <span>{{ section.settings.button }}</span>
        <img
          src="{{ 'more-products-icon.svg' | asset_url }}"
          alt="{{ section.settings.button }}"
          width="18"
          height="auto"
          class="inline-block ml-2 mt-[-4px]"
        >
      </a>
    </div>
  </div>

  <div
    id="top-sellers"
    class="flex flex-row gap-5 overflow-x-auto overflow-y-hidden scrollbar-hide px-4 md:px-0 -mx-4 md:mx-0 items-stretch"
    style="-webkit-overflow-scrolling: touch; scroll-behavior: smooth;"
  >
    {% for product in collections['top-sellers'].products %}
      <div class="min-w-[250px] flex-shrink-0 flex flex-col h-full">
        <div class="mb-3">
          <a href="{{ product.url }}">
            {{ product.featured_image | image_url: width: 600 | image_tag: alt: product.title, class: 'rounded-lg' }}
          </a>
        </div>

        <div class="text-[0.8rem] mb-3 flex-grow flex flex-col gap-2 min-h-[42px]">
          <div class="flex justify-between items-center">
            <a href="{{ product.url }}" class="text-left">{{ product.title }}</a>
            <!-- Start of Judge.me code -->
            <div class="jdgm-widget jdgm-preview-badge" data-id="{{ product.id }}">
              {{ product.metafields.judgeme.badge }}
            </div>
            <!-- End of Judge.me code -->
          </div>
        </div>

        <div class="text-[0.8rem] font-semibold text-center mb-3 min-h-[20px]">
          <a href="{{ product.url }}">{{ product.price | money }}</a>
        </div>

        <div class="mt-auto">
          {% assign first_available_variant = product.selected_or_first_available_variant %}
          {% if first_available_variant and first_available_variant.available %}
            <form method="post" action="{{ routes.cart_add_url }}" class="w-full">
              <input type="hidden" name="id" value="{{ first_available_variant.id }}">
              <button
                type="submit"
                class="w-full flex items-center justify-center gap-2 bg-[#343057] text-white py-2 rounded-lg hover:opacity-90 text-sm"
              >
                Į krepšelį
                <img
                  src="{{ 'cart-icon.svg' | asset_url }}"
                  alt="Cart"
                  class="w-4 h-4"
                  style="filter: brightness(0) invert(1);"
                  width="16"
                  height="16"
                >
              </button>
            </form>
          {% else %}
            <button
              class="w-full flex items-center justify-center gap-2 bg-[#343057] text-white py-2 rounded-lg opacity-50 cursor-not-allowed text-sm"
              disabled
            >
              Sold out
              <img
                src="{{ 'cart-icon.svg' | asset_url }}"
                alt="Cart"
                class="w-4 h-4"
                style="filter: brightness(0) invert(1);"
                width="16"
                height="16"
              >
            </button>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="pt-16 flex md:hidden justify-center">
    <a
      href="{{ routes.all_products_collection_url }}"
      class="bg-[#343057] text-center rounded-lg text-[#fff] text-md py-3 px-12"
    >
      <span>{{ section.settings.button }}</span>
      <img
        src="{{ 'more-products-icon.svg' | asset_url }}"
        alt="{{ section.settings.button }}"
        width="18"
        height="auto"
        class="inline-block ml-2 mt-[-4px]"
      >
    </a>
  </div>
</div>

{% schema %}
{
  "name": "Front page: Top Sellers",
  "tag": "section",
  "limit": 1,
  "settings": [
    {
      "type": "richtext",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "button",
      "label": "Button text"
    }
  ]
}
{% endschema %}
